(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{39:function(e,t,s){},40:function(e,t,s){},66:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s.n(c),r=s(31),a=s.n(r),i=s(3),l=(s(39),s(15)),j=s(16),o=s(18),d=s(17),h=(s(40),s(2)),u=s(9),b=s.n(u),m=(s(59),s(0));var x=function(e){var t,s,c,n=e.isAuthenticated,r=e.logout;return t="/login",s="login",n&&(t="/logout",s="logout",c=r),Object(m.jsxs)("header",{className:"d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom",children:[Object(m.jsx)(i.b,{to:"/",className:"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none",children:"Fitness"}),Object(m.jsxs)("ul",{className:"nav nav-pills",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/users",className:"nav-link",children:"Users"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/services",className:"nav-link",children:"Services"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/trainers",className:"nav-link",children:"Trainers"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/recordings",className:"nav-link",children:"Recordings"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:t,className:"nav-link",onClick:c,children:s})}),!n&&Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/register",className:"nav-link",children:"\u0417\u0430\u0440\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})]})},O=function(){return Object(m.jsx)("footer",{children:"\xa9 KPK, 2021"})},p=function(e){var t=e.user;return Object(m.jsxs)("tr",{className:"user-row",children:[Object(m.jsx)("td",{children:t.id}),Object(m.jsx)("td",{children:t.username}),Object(m.jsx)("td",{children:t.date_birth})]})},f=function(e){var t=e.users;return Object(m.jsxs)("div",{className:"user-list",children:[Object(m.jsx)("h1",{children:"Users"}),Object(m.jsxs)("table",{className:"user-list__table",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"id"}),Object(m.jsx)("th",{children:"username"}),Object(m.jsx)("th",{children:"date birth"})]})}),Object(m.jsx)("tbody",{children:t.map((function(e){return Object(m.jsx)(p,{user:e},e.id)}))})]})]})},v=function(e){var t=e.service;return Object(m.jsxs)("tr",{className:"service-row",children:[Object(m.jsx)("td",{children:t.id}),Object(m.jsx)("td",{children:Object(m.jsx)(i.b,{to:"/services/detail/".concat(t.id),className:"nav-link",children:t.name})}),Object(m.jsx)("td",{children:t.price}),Object(m.jsx)("td",{children:Object(m.jsx)(i.b,{to:"/services/delete/".concat(t.id),className:"nav-link",children:"delete"})})]})},g=function(e){var t=e.services;return Object(m.jsxs)("table",{className:"service-list",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"id"}),Object(m.jsx)("th",{children:"Name"}),Object(m.jsx)("th",{children:"Price"}),Object(m.jsx)("th",{children:"delete"})]})}),Object(m.jsx)("tbody",{children:t.map((function(e){return Object(m.jsx)(v,{service:e},e.name)}))})]})},N=function(e){var t=e.services,s=Object(h.e)().id,c=t.filter((function(e){return e.id===+s}))[0];return Object(m.jsxs)("div",{className:"service-detail",children:[Object(m.jsxs)("h2",{children:["Service: ",c.name]}),Object(m.jsxs)("p",{children:["Price: ",c.price]}),Object(m.jsxs)("p",{children:["desc: ",c.desc]})]})},k=function(e){var t=e.recording;return Object(m.jsxs)("tr",{className:"recording-row",children:[Object(m.jsx)("td",{children:Object(m.jsx)(i.b,{to:"/recordings/detail/".concat(t.id),className:"nav-link",children:t.id})}),Object(m.jsx)("td",{children:t.created}),Object(m.jsx)("td",{children:t.updated}),Object(m.jsx)("td",{children:Object(m.jsx)(i.b,{to:"/recording/delete/".concat(t.id),className:"nav-link",children:"delete"})})]})},y=function(e){var t=e.recordings;return Object(m.jsxs)("table",{className:"recordings-list",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"id"}),Object(m.jsx)("th",{children:"Created"}),Object(m.jsx)("th",{children:"Updated"})]})}),Object(m.jsx)("tbody",{children:t.map((function(e){return Object(m.jsx)(k,{recording:e},e.id)}))})]})},S=function(e){var t=e.recordings,s=e.users,c=e.services,n=e.trainers,r=Object(h.e)().id,a=t.filter((function(e){return e.id===+r}))[0],i=c.find((function(e){return a.service===e.id})),l=s.filter((function(e){return a.user.includes(e.id)})),j=n.filter((function(e){return a.trainer.includes(e.id)}));return Object(m.jsxs)("div",{className:"recording-detail",children:[Object(m.jsxs)("h2",{children:["Recording: ",a.id]}),Object(m.jsxs)("h3",{children:["Service: ",i.name]}),Object(m.jsx)("h4",{children:"Trainer:"}),Object(m.jsx)("ul",{children:j.map((function(e){return Object(m.jsx)("li",{children:e.name},e.id)}))}),Object(m.jsxs)("p",{children:["Created: ",a.created]}),Object(m.jsxs)("p",{children:["Updated: ",a.updated]}),Object(m.jsx)("h4",{children:"Members:"}),Object(m.jsx)("ul",{children:l.map((function(e){return Object(m.jsx)("li",{children:e.username},e.id)}))})]})},w=function(e){var t=e.trainer;return Object(m.jsxs)("tr",{className:"trainer-row",children:[Object(m.jsx)("td",{children:t.id}),Object(m.jsx)("td",{children:t.name}),Object(m.jsx)("td",{children:t.surname}),Object(m.jsx)("td",{children:t.patronymic})]})},C=function(e){var t=e.trainers;return Object(m.jsxs)("table",{className:"trainers-list",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"id"}),Object(m.jsx)("th",{children:"Name"}),Object(m.jsx)("th",{children:"surname"}),Object(m.jsx)("th",{children:"patronymic"})]})}),Object(m.jsx)("tbody",{children:t.map((function(e){return Object(m.jsx)(w,{trainer:e},e.id)}))})]})},T=function(){return Object(m.jsx)("h1",{children:"Hello"})},I=s(34),F=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var c;return Object(l.a)(this,s),(c=t.call(this,e)).state={username:"",password:""},c}return Object(j.a)(s,[{key:"handleChange",value:function(e){this.setState(Object(I.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.login(this.state.username,this.state.password)}},{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{className:"login-form",children:Object(m.jsxs)("form",{method:"post",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(m.jsx)("input",{type:"text",name:"username",placeholder:"username",onChange:function(t){return e.handleChange(t)}}),Object(m.jsx)("input",{type:"password",name:"password",placeholder:"password",onChange:function(t){return e.handleChange(t)}}),Object(m.jsx)("input",{type:"submit",value:"login"})]})})}}]),s}(n.a.Component),A=s(11),_=function(){var e=Object(c.useState)(""),t=Object(A.a)(e,2),s=t[0],n=t[1],r=Object(c.useState)(""),a=Object(A.a)(r,2),i=a[0],l=a[1],j=Object(c.useState)(""),o=Object(A.a)(j,2),d=o[0],h=o[1],u=Object(c.useState)(""),x=Object(A.a)(u,2),O=x[0],p=x[1],f=Object(c.useState)(""),v=Object(A.a)(f,2),g=v[0],N=v[1],k=Object(c.useState)(""),y=Object(A.a)(k,2),S=y[0],w=y[1];return Object(m.jsx)("div",{className:"login-form",children:Object(m.jsxs)("form",{method:"post",onSubmit:function(e){e.preventDefault(),b.a.post("http://127.0.0.1:8000/api/register/",{username:s,password:g,first_name:d,last_name:O,email:i,phone_number:S}).then((function(e){alert("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),window.location="/login"})).catch((function(e){alert("\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}))},children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputUserName",className:"form-label",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"login",placeholder:"\u041b\u043e\u0433\u0438\u043d",id:"exampleInputUserName",onChange:function(e){n(e.target.value)}})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputFirstName",className:"form-label",children:"\u0418\u043c\u044f"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"first_name",placeholder:"\u0418\u043c\u044f",id:"exampleInputFirstName",onChange:function(e){h(e.target.value)}})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputLastName",className:"form-label",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"last_name",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",id:"exampleInputLastName",onChange:function(e){p(e.target.value)}})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputEmail",className:"form-label",children:"\u041f\u043e\u0447\u0442\u0430"}),Object(m.jsx)("input",{type:"email",className:"form-control",name:"mail",placeholder:"\u041f\u043e\u0447\u0442\u0430",id:"exampleInputEmail",onChange:function(e){l(e.target.value)}})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputPassword",className:"form-label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsx)("input",{type:"password",className:"form-control",name:"password",placeholder:"password",id:"exampleInputPassword",onChange:function(e){N(e.target.value)}})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputNumber",className:"form-label",children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"}),Object(m.jsx)("input",{type:"number",className:"form-control",name:"number",placeholder:"+7 900 800 55 25",id:"exampleInputNumber",min:"10",onChange:function(e){w(e.target.value)}})]}),Object(m.jsx)("input",{type:"submit",value:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",className:"btn btn-success"})]})})},P=function(e){return"".concat("http://localhost:8000","/api/").concat(e,"/")},U=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var c;return Object(l.a)(this,s),(c=t.call(this,e)).state={users:[],services:[],recordings:[],trainers:[],accessToken:c.getAccessToken()},c}return Object(j.a)(s,[{key:"componentDidMount",value:function(){this.loadState()}},{key:"loadState",value:function(){var e=this,t=this.getHeaders();b.a.get(P("users"),{headers:t}).then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)})),b.a.get(P("services"),{headers:t}).then((function(t){e.setState({services:t.data})})).catch((function(e){return console.log(e)})),b.a.get(P("recordings"),{headers:t}).then((function(t){e.setState({recordings:t.data})})).catch((function(e){return console.log(e)})),b.a.get(P("trainers"),{headers:t}).then((function(t){e.setState({trainers:t.data})})).catch((function(e){return console.log(e)}))}},{key:"login",value:function(e,t){var s=this;b.a.post(P("token"),{username:e,password:t}).then((function(e){var t=e.data.refresh,c=e.data.access;console.log(c),s.saveTokens(t,c),s.setState({accessToken:c},s.loadState)})).catch((function(e){return console.log(e)}))}},{key:"logout",value:function(){localStorage.setItem("refreshToken",null),localStorage.setItem("accessToken",null),this.clearState()}},{key:"clearState",value:function(){this.setState({accessToken:null,users:[],services:[],recordings:[],trainers:[]})}},{key:"saveTokens",value:function(e,t){localStorage.setItem("refreshToken",e),localStorage.setItem("accessToken",t)}},{key:"getAccessToken",value:function(){return localStorage.getItem("accessToken")}},{key:"isAuthenticated",value:function(){return"null"!==this.state.accessToken&&null!==this.state.accessToken}},{key:"getHeaders",value:function(){var e={"Content-Type":"application/json"};return this.isAuthenticated()&&(e.Authorization="Bearer ".concat(this.state.accessToken)),e}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"main",children:[Object(m.jsxs)(i.a,{children:[Object(m.jsx)(x,{isAuthenticated:this.isAuthenticated(),logout:function(){return e.logout()}}),Object(m.jsx)(h.a,{exact:!0,path:"/",children:Object(m.jsx)(T,{})}),Object(m.jsx)(h.a,{exact:!0,path:"/users",children:Object(m.jsx)(f,{users:this.state.users})}),Object(m.jsx)(h.a,{exact:!0,path:"/services",children:Object(m.jsx)(g,{services:this.state.services})}),Object(m.jsx)(h.a,{exact:!0,path:"/services/detail/:id",children:Object(m.jsx)(N,{services:this.state.services})}),Object(m.jsx)(h.a,{exact:!0,path:"/trainers",children:Object(m.jsx)(C,{trainers:this.state.trainers})}),Object(m.jsx)(h.a,{exact:!0,path:"/recordings",children:Object(m.jsx)(y,{recordings:this.state.recordings})}),Object(m.jsx)(h.a,{exact:!0,path:"/recordings/detail/:id",children:Object(m.jsx)(S,{recordings:this.state.recordings,users:this.state.users,services:this.state.services,trainers:this.state.trainers})}),Object(m.jsx)(h.a,{exact:!0,path:"/login",children:Object(m.jsx)(F,{login:function(t,s){return e.login(t,s)}})}),Object(m.jsx)(h.a,{exact:!0,path:"/register",children:Object(m.jsx)(_,{login:function(t,s){return e.register(t,s)}})})]}),Object(m.jsx)(O,{})]})}}]),s}(n.a.Component),D=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,67)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,a=t.getTTFB;s(e),c(e),n(e),r(e),a(e)}))};a.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(i.a,{children:Object(m.jsx)(U,{})})}),document.getElementById("root")),D()}},[[66,1,2]]]);
//# sourceMappingURL=main.4ecd9345.chunk.js.map